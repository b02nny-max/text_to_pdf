<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Text to PDF Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f2f3f7;
  --toolbar:#ffffff;
  --btn:#eef0ff;
  --accent:#4f46e5;
  --ui-text:#000;
  --page-bg:#ffffff;
  --page-text:#000;
}

.dark{
  --bg:#121212;
  --toolbar:#1a1a1a;
  --btn:#2a2a2a;
  --ui-text:#f5f5f5;
  --page-bg:#ffffff;
  --page-text:#000;
}

*{box-sizing:border-box;font-family:system-ui}

body{
  margin:0;
  background:var(--bg);
  color:var(--ui-text);
  height:100vh;
  overflow:hidden;
}

.toolbar{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  padding:10px;
  background:var(--toolbar);
}

.toolbar button,
.toolbar input[type="color"]{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  background:var(--btn);
  cursor:pointer;
}

.toolbar button.active{
  background:var(--accent);
  color:#fff;
}

.workspace{
  height:calc(100vh - 64px);
  overflow:auto;
  padding:12px;
  display:flex;
  justify-content:center;
}

.document{
  width:100%;
  max-width:850px;
  display:flex;
  flex-direction:column;
  gap:24px;
}

.page{
  background:var(--page-bg);
  color:var(--page-text);
  min-height:1123px;
  padding:48px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
  outline:none;
  white-space:pre-wrap;
  word-wrap:break-word;
}
</style>
</head>

<body>

<div class="toolbar">
  <button onclick="cmd('bold')"><b>B</b></button>
  <button onclick="cmd('italic')"><i>I</i></button>
  <button onclick="cmd('underline')"><u>U</u></button>

  <button onclick="cmd('justifyLeft')">â¬…</button>
  <button onclick="cmd('justifyCenter')">â¬†</button>
  <button onclick="cmd('justifyRight')">âž¡</button>
  <button onclick="cmd('justifyFull')">â˜°</button>

  <input type="color" onchange="document.execCommand('foreColor',false,this.value)">

  <button onclick="addPage()">âž• Page</button>
  <button onclick="removePage()">âž– Page</button>

  <button onclick="generatePDF()">ðŸ“„ PDF</button>
  <button onclick="toggleDark()">ðŸŒ™</button>
</div>

<div class="workspace">
  <div id="doc" class="document">
    <div class="page" contenteditable="true"></div>
  </div>
</div>

<script>
let currentPage = document.querySelector(".page");

function cmd(c){
  document.execCommand(c,false,null);
}

document.addEventListener("focusin",e=>{
  if(e.target.classList.contains("page")) currentPage=e.target;
});

function addPage(){
  let p=document.createElement("div");
  p.className="page";
  p.contentEditable=true;
  document.getElementById("doc").appendChild(p);
  p.focus();
}

function removePage(){
  let pages=document.querySelectorAll(".page");
  if(pages.length>1){
    currentPage.remove();
  }
}

function generatePDF(){
  fetch("/generate-pdf",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({html:document.getElementById("doc").innerHTML})
  })
  .then(r=>r.blob())
  .then(b=>{
    let a=document.createElement("a");
    a.href=URL.createObjectURL(b);
    a.download="document.pdf";
    a.click();
  });
}

function toggleDark(){
  document.body.classList.toggle("dark");
}
</script>

</body>
</html>
